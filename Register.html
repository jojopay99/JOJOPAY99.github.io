<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOJOPAY | å®Œæ•´è¨»å†Š</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        body { background: radial-gradient(circle at top, #1c1c3d 0%, #0a0a14 100%); color: white; }
        .form-card { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 30px; }
        .input-box { background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.1); width: 100%; padding: 12px; border-radius: 12px; margin-top: 4px; color: white; outline: none; font-size: 14px; }
        .upload-item { background: rgba(255, 255, 255, 0.03); border: 2px dashed rgba(255, 255, 255, 0.15); border-radius: 16px; display: flex; flex-direction: column; align-items: center; justify-content: center; aspect-ratio: 16 / 10; cursor: pointer; position: relative; overflow: hidden; }
        .upload-item img { position: absolute; width: 100%; height: 100%; object-fit: cover; display: none; }
        .kyc-box { background: rgba(236, 72, 153, 0.05); border: 1px solid rgba(236, 72, 153, 0.2); border-radius: 20px; padding: 20px; }
        .contact-row { background: rgba(255, 255, 255, 0.03); padding: 15px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.05); margin-bottom: 10px; }
    </style>
</head>
<body class="p-4 pb-24">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-6 text-center text-indigo-400">å¡«å¯«å€‹äººè³‡æ–™</h1>
        
        <div class="form-card p-6 space-y-8">
            <section class="space-y-4">
                <h2 class="font-bold border-l-4 border-indigo-500 pl-2 text-indigo-300 text-lg">åŸºæœ¬è³‡æ–™</h2>
                <input type="text" id="name" class="input-box" placeholder="çœŸå¯¦å§“å">
                <input type="text" id="idCard" class="input-box" placeholder="èº«åˆ†è­‰å­—è™Ÿ">
                <div class="flex gap-2">
                    <input type="tel" id="phone" class="input-box" placeholder="æ‰‹æ©Ÿè™Ÿç¢¼">
                    <button onclick="alert('é©—è­‰ç¢¼å·²ç™¼é€')" class="bg-indigo-600 px-4 rounded-xl text-xs mt-1">ç™¼é€</button>
                </div>
                <input type="text" id="vCode" class="input-box" placeholder="é©—è­‰ç¢¼ (1234)">
                <input type="text" id="hAddr" class="input-box" placeholder="æˆ¶ç±åœ°å€">
                <input type="text" id="cAddr" class="input-box" placeholder="ç¾å±…åœ°å€">
                <input type="text" id="bank" class="input-box" placeholder="æ’¥æ¬¾å¸³æˆ¶ (éŠ€è¡Œ+å¸³è™Ÿ)">
            </section>

            <section class="space-y-4">
                <h2 class="font-bold border-l-4 border-indigo-500 pl-2 text-indigo-300 text-lg">å·¥ä½œè³‡è¨Š</h2>
                <select id="jobType" class="input-box bg-gray-800">
                    <option value="">é¸æ“‡è·æ¥­é¡å‹</option>
                    <option value="å­¸ç”Ÿ">å­¸ç”Ÿ</option>
                    <option value="ä¸Šç­æ—">ä¸Šç­æ—</option>
                    <option value="è»å…¬æ•™">è»å…¬æ•™</option>
                    <option value="è‡ªç”±æ¥­">è‡ªç”±æ¥­</option>
                </select>
                <input type="text" id="compName" class="input-box" placeholder="å…¬å¸/å­¸æ ¡åç¨±">
                <input type="text" id="compAddr" class="input-box" placeholder="å…¬å¸/å­¸æ ¡åœ°å€">
                <input type="tel" id="compTel" class="input-box" placeholder="å…¬å¸/å­¸æ ¡é›»è©±">
            </section>

            <section class="space-y-4">
                <h2 class="font-bold border-l-4 border-indigo-500 pl-2 text-indigo-300 text-lg">è¯çµ¡äºº(æœ€å°‘3ä½)</h2>
                <div id="contactList">
                    <div class="contact-row space-y-2">
                        <div class="flex gap-2"><input type="text" placeholder="é—œä¿‚" class="input-box text-sm"><input type="text" placeholder="å§“å" class="input-box text-sm"></div>
                        <input type="tel" placeholder="è¯çµ¡é›»è©±" class="input-box text-sm">
                    </div>
                </div>
                <button onclick="addContact()" class="w-full py-2 border border-dashed border-gray-600 rounded-xl text-xs text-gray-400">+ æ–°å¢è¯çµ¡äºº</button>
            </section>

            <section class="space-y-4">
                <h2 class="font-bold border-l-4 border-indigo-500 pl-2 text-indigo-300 text-lg">è­‰ä»¶ä¸Šå‚³</h2>
                <div class="grid grid-cols-2 gap-3">
                    <div class="upload-item" onclick="triggerUpload('f1')">
                        <span id="t-f1">ğŸªª èº«åˆ†è­‰æ­£é¢</span>
                        <img id="img-f1">
                        <input type="file" id="f1" class="hidden" accept="image/*" onchange="preview(this, 'f1')">
                    </div>
                    <div class="upload-item" onclick="triggerUpload('f2')">
                        <span id="t-f2">ğŸªª èº«åˆ†è­‰åé¢</span>
                        <img id="img-f2">
                        <input type="file" id="f2" class="hidden" accept="image/*" onchange="preview(this, 'f2')">
                    </div>                    <div class="upload-item" onclick="triggerUpload('f2')">
                        <span id="t-f3">ğŸªª å¥ä¿å¡</span>
                        <img id="img-f3">
                        <input type="file" id="f3" class="hidden" accept="image/*" onchange="preview(this, 'f3')">
                    </div>
                    <div class="upload-item" onclick="triggerUpload('f4')">
                        <span id="t-f4">ğŸ¦ å­˜æ‘ºå°é¢</span>
                        <img id="img-f4">
                        <input type="file" id="f4" class="hidden" accept="image/*" onchange="preview(this, 'f4')">
                    </div>
                    <div class="upload-item" onclick="triggerUpload('f5')">
                        <span id="t-f5">ğŸ“œ å·¥ä½œ/å­¸ç”Ÿè­‰</span>
                        <img id="img-f5">
                        <input type="file" id="f5" class="hidden" accept="image/*" onchange="preview(this, 'f5')">
                    </div>
                </div>
            </section>

            <section class="kyc-box space-y-4">
                <h2 class="font-bold text-pink-400 flex items-center gap-2 text-lg">ğŸ“¸ èº«åˆ†èªè­‰ (KYC)</h2>
                <div class="bg-black/40 p-3 rounded-lg text-[11px] leading-relaxed text-gray-300 border border-pink-500/30">
                    è«‹æ‰‹æŒç™½ç´™å¯«ä¸‹ï¼š<br>
                    æœ¬äºº <span class="text-pink-400 font-bold">å§“å</span> æ–¼ <span class="text-pink-400 font-bold">ä»Šæ—¥æ—¥æœŸ</span><br>
                    ç”³è«‹ <span class="text-indigo-400">JOJOPAY</span> æœƒå“¡
                </div>
                <div class="upload-item border-pink-500/40 text-pink-300 py-10" onclick="triggerUpload('f5')">
                    <span id="t-f5">ğŸ¤³ é»æ“Šæ‹æ”æ‰‹æŒè‡ªæ‹</span>
                    <img id="img-f5">
                    <input type="file" id="f5" class="hidden" accept="image/*" onchange="preview(this, 'f5')">
                </div>
            </section>

            <button onclick="submitAll()" class="w-full bg-indigo-600 py-4 rounded-2xl font-bold text-lg active:scale-95 transition-all shadow-xl">é€å‡ºç”³è«‹è³‡æ–™</button>
        </div>
    </div>

    <script>
        const conf = { databaseURL: "https://jojopay-cefff-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(conf);
        const db = firebase.database();

        function addContact() {
            const div = document.createElement('div');
            div.className = "contact-row space-y-2";
            div.innerHTML = `<div class="flex gap-2"><input type="text" placeholder="é—œä¿‚" class="input-box text-sm"><input type="text" placeholder="å§“å" class="input-box text-sm"></div><input type="tel" placeholder="è¯çµ¡é›»è©±" class="input-box text-sm">`;
            document.getElementById('contactList').appendChild(div);
        }

        function triggerUpload(id) { document.getElementById(id).click(); }

        function preview(input, id) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('img-' + id).src = e.target.result;
                    document.getElementById('img-' + id).style.display = 'block';
                    document.getElementById('t-' + id).style.display = 'none';
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function submitAll() {
            const id = document.getElementById('idCard').value.trim().toUpperCase();
            if(!id || document.getElementById('vCode').value !== '1234') return alert("è«‹æª¢æŸ¥å¿…å¡«æ¬„ä½æˆ–é©—è­‰ç¢¼");

            const data = {
                name: document.getElementById('name').value,
                idCard: id,
                phone: document.getElementById('phone').value,
                hAddr: document.getElementById('hAddr').value,
                cAddr: document.getElementById('cAddr').value,
                bank: document.getElementById('bank').value,
                job: document.getElementById('jobType').value,
                compName: document.getElementById('compName').value,
                compTel: document.getElementById('compTel').value,
                status: 'pending', loanLimit: 'å¯©æ ¸ä¸­'
            };

            db.ref('users/' + id).set(data).then(() => {
                alert("ç”³è«‹æˆåŠŸï¼è«‹ç­‰å€™å¯©æ ¸");
                window.location.href = "index.html";
            });
        }
    </script>
</body>
</html>
