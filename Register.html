<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOJOPAY | 會員註冊</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        body { background: radial-gradient(circle at top, #1c1c3d 0%, #0a0a14 100%); color: white; }
        .form-card { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .input-box { background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.1); width: 100%; padding: 12px; border-radius: 12px; margin-top: 4px; color: white; outline: none; }
    </style>
</head>
<body class="p-6">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-6 text-center text-indigo-400">填寫個人資料</h1>
        <div class="form-card rounded-3xl p-6 space-y-4">
            <div><label class="text-xs text-gray-400">姓名</label><input type="text" id="regName" class="input-box" placeholder="請輸入全名"></div>
            <div><label class="text-xs text-gray-400">身分證字號</label><input type="text" id="regId" class="input-box" placeholder="A123456789"></div>
            <div><label class="text-xs text-gray-400">手機號碼</label><input type="tel" id="regPhone" class="input-box" placeholder="0912345678"></div>
            <div><label class="text-xs text-gray-400">驗證碼 (預設1234)</label><input type="text" id="regCode" class="input-box" placeholder="請輸入1234"></div>
            <div><label class="text-xs text-gray-400">撥款帳戶</label><input type="text" id="regBank" class="input-box" placeholder="戶名+銀行代碼+帳號"></div>
            
            <button onclick="handleRegister()" class="w-full bg-indigo-600 py-4 rounded-2xl font-bold text-lg mt-4 shadow-lg active:scale-95 transition-all">送出申請</button>
            <center><a href="index.html" class="text-xs text-gray-500">已有帳號？返回登入</a></center>
        </div>
    </div>

    <script>
        // 初始化 Firebase (請確保使用你的配置)
        const firebaseConfig = { databaseURL: "https://jojopay-cefff-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function handleRegister() {
            const name = document.getElementById('regName').value;
            const idCard = document.getElementById('regId').value.trim().toUpperCase();
            const phone = document.getElementById('regPhone').value;
            const code = document.getElementById('regCode').value;
            const bank = document.getElementById('regBank').value;

            if (!name || !idCard || !phone || !bank) return alert("請完整填寫所有欄位");
            if (code !== "1234") return alert("驗證碼錯誤");

            const userData = {
                name: name,
                idCard: idCard,
                phone: phone,
                bankAccount: bank,
                status: 'pending',
                loanLimit: '審核中'
            };

            // 存入 Firebase
            db.ref('users/' + idCard).set(userData).then(() => {
                alert("註冊成功！資料已送出審核。");
                window.location.href = "index.html"; // 回首頁登入
            }).catch(err => {
                alert("系統錯誤: " + err.message);
            });
        }
    </script>
</body>
</html>
